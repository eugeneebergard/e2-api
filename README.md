# E2-api

## Инициализация и сборка

```
# установка пакетов
$ npm install

# сборка с локальным сервером
$ npm run start
# сборка с локальным сервером и hot reload
$ npm run dev
```

## Models

### Поля схемы `user`

- **email** — почта пользователя, по которой он регистрируется. Это обязательное поле, уникальное для каждого пользователя. Также оно валидируется на соответствие схеме электронной почты.
- **password** — хеш пароля. Обязательное поле-строка. База данных не возвращает это поле.
- **name** — имя пользователя, например: Александр или Мария. Это обязательное поле-строка от 2 до 30 символов.

### Поля схемы `article`

- **keyword** — ключевое слово, по которому статью нашли. Обязательное поле-строка.
- **title** — заголовок статьи. Обязательное поле-строка.
- **text** — текст статьи. Обязательное поле-строка.
- **date** — дата статьи. Обязательное поле-строка.
- **source** — источник статьи. Обязательное поле-строка.
- **link** — ссылка на статью. Обязательное поле-строка. URL-адрес.
- **image** — ссылка на иллюстрацию к статье. Обязательное поле-строка. URL-адрес.
- **owner** — \_id пользователя, сохранившего статью. База данных не возвращает это поле.

## Routers and Controllers

```
# возвращает информацию о пользователе (email и имя)
# требуется авторизация
GET /users/me

# редактирует информацию о пользователе и возвращает новые данные
# требуется авторизация
PUT /users/me

# возвращает все сохранённые пользователем статьи
# требуется авторизация
GET /articles

# создаёт статью с переданными в теле
# keyword, title, text, date, source, link и image
# требуется авторизация
POST /articles

# удаляет сохранённую статью  по _id
# требуется авторизация
DELETE /articles/:articleId

# создаёт пользователя с переданными в теле
# email, password и name
POST /signup

# проверяет переданные в теле почту и пароль
# и возвращает JWT
POST /signin

# чистит jwt cookie клиента
POST /logout

# проверяет авторизован ли пользователь и возвращает
# true или false
GET /check-user
```

## Logs

- `request.log` - хранит информацию о всех запросах к API
- `error.log` - хранит информацию об ошибках, которые возвращало API
